---
- name: "Make sure the {{ container_name }} container is created and running"
  docker_container:
    name: "{{ container_name }}"
    image: "traefik:2.3"
    networks:
      - name: swag_internal_vlan
    ports:
      - 80:80
      - 8080:8080
    volumes:
      - /var/run/docker.sock:/var/run/docker.sock:ro
      - "{{ DOCKER_DATA_DIR }}/{{ container_name }}/traefik.toml:/traefik.toml"
    restart_policy: unless-stopped


#image: 'traefik:2.3'
#    container_name: 'traefik'
#    restart: 'unless-stopped'
#    ports:
#      - '80:80'
#      - '8080:8080'
#    volumes:
#      - '/var/run/docker.sock:/var/run/docker.sock:ro'
#      - './traefik/traefik.toml:/traefik.toml'
#    networks:
#      - pi